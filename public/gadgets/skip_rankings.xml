<Module>
    <ModulePrefs title="ランキング" description="SKIPランキング">
        <Require feature="dynamic-height"/>
        <Require feature="tabs"/>
        <Require feature="setprefs"/>
    </ModulePrefs>

    <UserPref name="num_feed" display_name="表示するエントリー" datatype="enum" default_value="10">
        <EnumValue value="5"/>
        <EnumValue value="6"/>
    </UserPref>

    <Content type="html">
<![CDATA[
<script type="text/javascript">

var tabs = new _IG_Tabs(__MODULE_ID__);
var prefs = new _IG_Prefs(__MODULE_ID__);

function init() {
    var tabs = new _IG_Tabs(__MODULE_ID__, "entry_access");
    tabs.addDynamicTab("entry_access", callbackGenerator("https://test.skipaas.jp/ranking_data/entry_access/2010/02"));
    tabs.addDynamicTab("entry_comment", callbackGenerator("https://test.skipaas.jp/ranking_data/entry_comment/2010/02"));
    tabs.addDynamicTab("user_access", callbackGenerator("https://test.skipaas.jp/ranking_data/user_access/2010/02"));
}

function callbackGenerator(target_url) {
    return function(tabId) {
        callbackTab(tabId, target_url);
    }
}

function callbackTab(tabId, target_url) {
    _IG_FetchContent(target_url, function(html){_gel(tabId).innerHTML = html;});
}

_IG_RegisterOnloadHandler(init);

</script>

<style type="text/css">
<!--
-->
</style>
]]>
    </Content>
</Module>
