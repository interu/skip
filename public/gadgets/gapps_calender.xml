<?xml version="1.0" encoding="UTF-8"?>
<Module>
    <ModulePrefs title="スケジューラ">
        <Require feature="dynamic-height"/>
    </ModulePrefs>

    <Content type="html" view="home,canvas">
    <![CDATA[
    <script type="text/javascript">
        function init() {
            // sample access url : https://test.skipaas.jp/gadgets/gapps_mail
            var url = "https://test-live.skipaas.jp/gadgets/gapps_calenders";
            gadgets.io.makeRequest(url, response, { AUTHORIZATION: gadgets.io.AuthorizationType.IS_POST_PORTAL_UID});
        };

        function response(obj){
            document.body.innerHTML = obj.text;
            gadgets.window.adjustHeight();

            var links = document.body.getElementsByTagName("a");
            for(var i=0;i<links.length;i++){
                links[i].onclick = function(){
                    try{
                        _IS_OpenPortalIframe(this.href);
                    }catch(e){
                        console.info(e);
                    }
                    return false;
                }
            }
        };

        document.body.innerHTML = "<img src='skin/imgs/indicator_verybig.gif'>";
        gadgets.util.registerOnLoadHandler(init);
    </script>
    ]]>
    </Content>
</Module>

